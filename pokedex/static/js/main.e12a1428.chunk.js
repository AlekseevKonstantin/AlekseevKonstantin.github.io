(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(9),s=n.n(o),r=(n(94),n(155)),c=n(54),l=n.n(c),p=n(71),u=n(72),m=n.n(u),f=function(){var e=m.a.create({baseURL:"https://pokeapi.co/api/v2/",timeout:6e3,Accept:"application/json, text/plain, */*","Content-Type":"application/json"});function t(e){return n.apply(this,arguments)}function n(){return(n=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.then((function(e){return{status:e.status,data:e.data}})).catch((function(e){return{config:e.config,msg:e.message}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{fetchList:function(n,a){return t(e.get("/pokemon",{params:{offset:"".concat(n),limit:"".concat(a)}}))},fetchDesc:function(n){return t(e.get("/pokemon/".concat(n)))},fetchTypeList:function(){return t(e.get("/type"))}}},d=i.a.createContext(),g=function(e){var t=e.children,n=Object(r.a)((function(){return{pages:{},pokemons:{},count:0,offset:0,curList:[],page:1,isLoad:!1,isDescLoad:!1,typeList:[],isTypeListLoad:!1,filterName:"",filterTypes:[],pageCount:20,selectedPokemon:"",reset:function(){n.pages={},n.count=0,n.offset=0,n.curList=[],n.page=1,n.isLoad=!1,n.isDescLoad=!1},setSelectedPokemon:function(e){n.selectedPokemon=e},setPageCount:function(e){n.pageCount=e},setFilterName:function(e){n.filterName=e},setFilterTypes:function(e){n.filterTypes=e},setIsTypeListLoad:function(e){n.isTypeListLoad=e},setTypeList:function(e){for(var t=e.results,a=[],i=0,o=t.length;i<o;i+=1)a.push(t[i].name);n.typeList=a.sort((function(e,t){return e>t?1:-1}))},setCurList:function(e){n.curList.push(e)},clearCurList:function(){n.curList=[]},setIsDescLoad:function(e){n.isDescLoad=e},setIsLoad:function(e){n.isLoad=e},setPage:function(e){n.page=e},setCount:function(e){n.count=e},setOffset:function(e){n.offset=e},setPokemon:function(e){n.pokemons[e.name]=e},setPageData:function(e,t){n.pages[t]=e},fetchPokemonsList:function(e,t,a){n.setIsLoad(!1),n.setIsDescLoad(!1),n.setOffset(e),n.setPage(a);var i=n.pages[a];n.count>0&&i?n.getPokemonDesk(a):f().fetchList(e,t).then((function(e){200===e.status&&(n.setPageData(e.data,a),0===n.count&&n.setCount(e.data.count),n.setIsLoad(!0),n.getPokemonDesk(a))}))},getPokemonDesk:function(e){var t=n.pages[e].results;n.clearCurList();for(var a=function(e,a){n.pokemons[t[e].name]?setTimeout((function(){n.setCurList(n.pokemons[t[e].name])}),100):n.fetchPokemonsDesc(t[e].name)},i=0,o=t.length;i<o;i+=1)a(i)},fetchPokemonsDesc:function(e){setTimeout((function(){f().fetchDesc(e).then((function(e){if(200===e.status)n.setPokemon(e.data),setTimeout((function(){n.setCurList(e.data)}),100);else{console.log(e.msg);var t=e.config.url.replace("/pokemon/","");n.fetchPokemonsDesc(t)}}))}),50)},initTypeList:function(){n.setIsTypeListLoad(!1),f().fetchTypeList().then((function(e){200===e.status?n.setTypeList(e.data):console.log(e.msg),n.setIsTypeListLoad(!0)}))},getPokemonInfo:function(e){var t=n.pokemons[e];return{id:t.id,name:t.name,mainImg:t.sprites.front_default,types:t.types.map((function(e){return e.type.name})).join(", ")}},getPokemonDesc:function(e){var t=n.pokemons[e];return{id:t.id,name:t.name,height:t.height,weight:t.weight,images:[t.sprites.front_default,t.sprites.front_shiny,t.sprites.back_shiny,t.sprites.back_default],types:t.types.map((function(e){return e.type.name})).join(", ")}},filterByName:function(e){return e.filter((function(e){return!e.name.search(n.filterName)}))},filterByType:function(e){var t=n.filterTypes.sort().join(", ");return e.filter((function(e){return e.types.map((function(e){return e.type.name})).sort().join(", ").search(t)>-1}))},get pokemonList(){return n.filterName.length>0&&n.filterTypes.length>0?n.filterByType(n.filterByName(n.curList)):n.filterName.length>0?n.filterByName(n.curList):n.filterTypes.length>0?n.filterByType(n.curList):n.curList},get isDescLoaded(){return!(!n.pages[n.page]||n.curList.length!==n.pages[n.page].results.length)}}}));return i.a.createElement(d.Provider,{value:n},t)},h=n(156),x=n(171),y=n(29),b=n(175),k=Object(h.a)((function(e){return{header:Object(y.a)({width:"100%",display:"flex",justifyContent:"space-between",padding:"10px 30px",backgroundColor:"#dc004e"},e.breakpoints.down("sm"),{padding:"10px 15px"}),logo:Object(y.a)({display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"1.3rem",fontWeight:"700"},e.breakpoints.down("sm"),{fontSize:"1rem"}),textfield:{color:"#fff",margin:"8px 0px 8px 20px","& input":{color:"#fff !important"},"& label":{color:"#fff !important"},"& fieldset":{borderColor:"#fff !important"}}}}));function v(){var e=k(),t=i.a.useContext(d);function n(e){t.setFilterName(e.target.value)}return Object(r.b)((function(){return i.a.createElement("header",{className:e.header},i.a.createElement("span",{className:e.logo},"Pokedex"),i.a.createElement("div",{className:"d-flex align-center"},i.a.createElement(b.a,{label:"filter by name",classes:{root:e.textfield},type:"text",margin:"normal",variant:"outlined",size:"small",onChange:n,value:t.filterName})))}))}var E=n(75),L=n(119),C=n(165),N=n(162),T=n(177),P=n(170),j=n(159),w=n(178),D=n(173),O=n(164),I=Object(h.a)((function(e){return{filter:Object(y.a)({width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 30px 30px 30px"},e.breakpoints.down("sm"),{padding:"0 15px 30px 15px"}),counterBtn:{color:"#bdbdbd",borderColor:"#bdbdbd !important",transition:"border-color .3s"},active:{borderBottom:"1px solid #bdbdbd"},formControl:{minWidth:120,maxWidth:300,margin:"0 40px"}}}));function B(){var e=i.a.useContext(d),t={PaperProps:{style:{maxHeight:224,width:250}}},n=[{title:10,isActive:!1},{title:20,isActive:!0},{title:50,isActive:!1}],o=I();Object(a.useEffect)((function(){e.initTypeList()}),[]);var s=Object(a.useState)((function(){return t=e.pageCount,n.map((function(e){return e.isActive=e.title===parseInt(t),e}));var t})),c=Object(E.a)(s,1)[0];function l(t){e.setFilterTypes(t.target.value)}function p(t){t.preventDefault();var n=t.target.innerText;e.setPageCount(n)}return Object(r.b)((function(){return i.a.createElement("div",{className:o.filter},i.a.createElement(N.a,{className:o.formControl},i.a.createElement(T.a,{id:"mutiple-checkbox-label"},"Types"),i.a.createElement(P.a,{labelId:"mutiple-checkbox-label",id:"mutiple-checkbox",multiple:!0,value:e.filterTypes,onChange:l,input:i.a.createElement(j.a,null),renderValue:function(e){return e.join(", ")},MenuProps:t},e.isTypeListLoad&&e.typeList.map((function(t,n){return i.a.createElement(w.a,{key:n,value:t},i.a.createElement(D.a,{checked:e.filterTypes.indexOf(t)>-1}),i.a.createElement(O.a,{primary:t}))})))),i.a.createElement(C.a,{variant:"text",color:"primary","aria-label":"text primary button group"},c.length>0&&c.map((function(e){return i.a.createElement(L.a,{className:o.counterBtn,classes:e.isActive?{label:o.active}:null,key:e.title,onClick:p},e.title)}))))}))}var z=n(168),S=n(166),W=n(167),A=Object(h.a)((function(e){return{card:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px 15px","&:hover":{cursor:"pointer"}},cardImg:{width:"90px",height:"90px"},title:{display:"block",fontWeight:"600",fontSize:"1.2rem",color:e.palette.text.primary,marginBottom:"3px"},types:{display:"block",fontWeight:"300",fontSize:"14px",color:e.palette.text.secondary,marginBottom:"2px"}}})),V=function(e){var t=A();return i.a.createElement(S.a,{className:t.card,onClick:e.onDialog},i.a.createElement(W.a,{image:"".concat(e.desc.mainImg),className:t.cardImg}),i.a.createElement("span",{className:t.title},e.desc.name),i.a.createElement("span",{className:t.types},e.desc.types))},F=Object(h.a)((function(e){return{container:Object(y.a)({padding:"0 30px 30px 30px"},e.breakpoints.down("sm"),{padding:"0 15px 30px 15px"})}})),$=function(){var e=i.a.useContext(d),t=F();var n=function(){return e.pokemonList.map((function(t,n){var a=e.getPokemonInfo(t.name);return i.a.createElement(z.a,{item:!0,xs:12,sm:6,md:3,key:n},i.a.createElement(V,{desc:a,onDialog:function(){return t=a.name,void e.setSelectedPokemon(t);var t}}))}))};return Object(r.b)((function(){return i.a.createElement(z.a,{container:!0,spacing:3,className:t.container},e.isDescLoaded&&n())}))},_=Object(h.a)((function(e){return{ldsEllipsis:{position:"absolute",zIndex:"100",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"inline-block",width:"80px",height:"80px","& div":{position:"absolute",top:"33px",width:"13px",height:"13px",borderRadius:"50%",background:"#000",animationTimingFunction:"cubic-bezier(0, 1, 1, 0)","&:nth-child(1)":{left:"8px",animation:"$lds-ellipsis1 600ms infinite"},"&:nth-child(2)":{left:"8px",animation:"$lds-ellipsis2 600ms infinite"},"&:nth-child(3)":{left:"32px",animation:"$lds-ellipsis2 600ms infinite"},"&:nth-child(4)":{left:"56px",animation:"$lds-ellipsis3 0.6s infinite"}}},"@keyframes lds-ellipsis1":{"0%":{transform:"scale(0)"},"100%":{transform:"scale(1)"}},"@keyframes lds-ellipsis3":{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)"}},"@keyframes lds-ellipsis2":{"0%":{transform:"translate(0, 0)"},"100%":{transform:"translate(24px, 0)"}}}}));function R(){var e=_();return i.a.createElement("div",{className:e.ldsEllipsis},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null))}var J=n(169),M=n(174),G=n(163),H=n(74),U=n.n(H),X=Object(h.a)((function(e){return{dialog:{position:"relatiove",padding:"20px",minWidth:"300px"},imgBlock:{width:"70px",marginRight:"30px","& img":{display:"block",width:"70px",height:"70px",border:"1px solid ".concat(e.palette.text.secondary),borderRadius:"4px",marginBottom:"4px","&:last-child":{marginBottom:"0"}}},info:{flexGrow:"1"},text:{display:"flex",fontWeight:"400",fontSize:"1rem",color:e.palette.text.secondary},textValue:{display:"block",fontWeight:"500",fontSize:"1rem",color:e.palette.text.primary,marginLeft:"6px"},closeBtn:{position:"absolute",zIndex:"300",top:"12px",right:"12px"},dialogTitle:{paddingTop:"0"}}}));function q(e){var t=X(),n=e.onClose,a=e.pokemon,o=e.open;return i.a.createElement(M.a,{"aria-labelledby":"simple-dialog-title",open:o,classes:{paper:t.dialog},onClose:function(){n()}},i.a.createElement(G.a,{onClick:function(){n()},"aria-label":"close",size:"small",classes:{root:t.closeBtn}},i.a.createElement(U.a,null)),i.a.createElement(J.a,{id:"simple-dialog-title",classes:{root:t.dialogTitle}},"Detailed description"),i.a.createElement("div",{className:"d-flex w100p"},i.a.createElement("div",{className:t.imgBlock},a.images.map((function(e,t){return i.a.createElement("img",{src:e,alt:e,key:t})}))),i.a.createElement("div",{className:t.info},i.a.createElement("span",{className:t.text},"name: ",i.a.createElement("span",{className:t.textValue},a.name)),i.a.createElement("span",{className:t.text},"height: ",i.a.createElement("span",{className:t.textValue},a.height)),i.a.createElement("span",{className:t.text},"weight: ",i.a.createElement("span",{className:t.textValue},a.weight)),i.a.createElement("span",{className:t.text},"types: ",i.a.createElement("span",{className:t.textValue},a.types)))))}var K=Object(h.a)((function(e){return{app:{position:"relative",height:"100%",display:"flex",flexDirection:"column",overflowX:"hidden"},content:{position:"relative",width:"100%",maxWidth:"1300px",display:"flex",flexDirection:"column",alignItems:"center",alignSelf:"center",padding:"30px 0"},pagination:{marginTop:"auto"}}}));var Q=function(){var e=K(),t=i.a.useContext(d);function n(e,n){t.fetchPokemonsList(n*t.pageCount,t.pageCount,n)}function o(){t.setSelectedPokemon("")}return Object(a.useEffect)((function(){t.reset(),t.fetchPokemonsList(t.pageCount,t.pageCount,1)}),[t.pageCount]),Object(r.b)((function(){return i.a.createElement("div",{className:e.app},t.selectedPokemon.length>0&&i.a.createElement(q,{pokemon:t.getPokemonDesc(t.selectedPokemon),open:t.selectedPokemon.length>0,onClose:o}),i.a.createElement(v,null),t.isDescLoaded?i.a.createElement("main",{className:e.content},i.a.createElement(B,null),i.a.createElement($,null),i.a.createElement(x.a,{className:e.pagination,count:Math.round(t.count/t.pageCount),shape:"rounded",page:t.page,onChange:n})):i.a.createElement(R,null))}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(g,null,i.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},89:function(e,t,n){e.exports=n(117)},94:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.e12a1428.chunk.js.map